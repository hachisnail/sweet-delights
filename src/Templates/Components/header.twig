<header class="sticky top-0 w-full px-10 py-1 bg-[#fee7b5] flex shadow-md shadow-[#cbb890] items-center z-30 ">
  <img src="/Assets/LogoWithName.png" alt="Sweet Delights Logo" class="h-20 w-20 inline-block mr-3">
  <nav class="flex text-[#835234] font-medium font-zen-antique h-fit gap-x-3 text-2xl">
    <a href="/" class="hover:text-[#d1a731] cursor-pointer">Home</a>
    <a href="/about" class="hover:text-[#d1a731] cursor-pointer">About Us</a>
    <a href="/products" class="hover:text-[#d1a731] cursor-pointer">Products</a>
  </nav>

  <div class="ml-auto flex gap-x-5 items-center relative">
    
    <div class="relative flex ">
      <button id="favouriteBtn">
        <svg xmlns="http://www.w3.org/2000/svg" width="28" height="28" fill="none" stroke="currentColor"
          stroke-width="2" stroke-linecap="round" stroke-linejoin="round"
          class="text-[#835234] hover:text-[#d1a731] cursor-pointer">
          <path
            d="M2 9.5a5.5 5.5 0 0 1 9.591-3.676.56.56 0 0 0 .818 0A5.49 5.49 0 0 1 22 9.5c0 2.29-1.5 4-3 5.5l-5.492 5.313a2 2 0 0 1-3 .019L5 15c-1.5-1.5-3-3.2-3-5.5"/>
        </svg>
      </button>
      <span id="favouriteCount"
        class="absolute -top-1 -right-2 bg-[#835234] text-white text-xs font-bold rounded-full px-1.5">0</span>
    </div>

    <div class="relative flex">
      <button id="cartBtn">
        <svg xmlns="http://www.w3.org/2000/svg" width="28" height="28" fill="none" stroke="currentColor"
          stroke-width="2" stroke-linecap="round" stroke-linejoin="round"
          class="text-[#835234] hover:text-[#d1a731] cursor-pointer">
          <circle cx="8" cy="21" r="1"/>
          <circle cx="19" cy="21" r="1"/>
          <path d="M2.05 2.05h2l2.66 12.42a2 2 0 0 0 2 1.58h9.78a2 2 0 0 0 1.95-1.57l1.65-7.43H5.12"/>
        </svg>
      </button>
      <span id="cartCount"
        class="absolute -top-1 -right-2 bg-[#835234] text-white text-xs font-bold rounded-full px-1.5">0</span>
    </div>

    <div class="relative">
      <button id="userMenuBtn">
        <svg xmlns="http://www.w3.org/2000/svg" width="28" height="28" fill="none" stroke="currentColor"
          stroke-width="2" stroke-linecap="round" stroke-linejoin="round"
          class="text-[#835234] hover:text-[#d1a731] cursor-pointer">
          <path d="M19 21v-2a4 4 0 0 0-4-4H9a4 4 0 0 0-4 4v2"/>
          <circle cx="12" cy="7" r="4"/>
        </svg>
      </button>

      <div id="userDropdown" 
           class="hidden absolute top-full right-0 mt-2 w-48 bg-white rounded-lg shadow-xl border border-pink-100 z-50">
        
        {# 'user' variable comes from AuthMiddleware #}
        {% if user %}
          <div class="py-2">
            <div class="px-4 py-2 text-sm text-gray-500 border-b">
              Welcome, {{ user.name }}!
            </div>
            
            {# 1. Admin/Superadmin Links #}
            {% if user.role in ['admin', 'superadmin'] %}
              <a href="/app/dashboard" class="block px-4 py-2 text-gray-700 hover:bg-pink-50">Admin Panel</a>
            {% endif %}

            {# 2. Common Links for ALL logged-in users #}
            <a href="/account/settings" class="block px-4 py-2 text-gray-700 hover:bg-pink-50">Account Settings</a>
            <a href="/account/orders" class="block px-4 py-2 text-gray-700 hover:bg-pink-50">My Orders</a>
            
            <a href="/logout" class="block w-full text-left px-4 py-2 text-red-600 hover:bg-pink-50 border-t">Logout</a>
          </div>
        {% else %}
          <div class="py-2">
            <a href="/login" class="block px-4 py-2 text-gray-700 hover:bg-pink-50">Login</a>
          </div>
        {% endif %}

      </div>
    </div>
    
  </div>
</header>